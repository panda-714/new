window.customify=window.customify||parent.customify||{},function(t,e,n){void 0===e.fontFields&&(e.fontFields={}),_.extend(e.fontFields,function(){const s=".font-options__wrapper";let i,o,a;const l=n.customize,c={},u={},d=function(e,n=!1,i=""){if(e.length&&(t(e).data("touched",!1),t(e).on("input change",(function(e,n){if(void 0!==n&&"customify"===n);else{const n=t(e.target).closest(s),i=t(n.children(".customify_font_values")).data("customize-setting-link");t(e.target).data("touched",!0),h(n,i)}})),!0===n)){const n={};_.isEmpty(i)||(n.placeholder=i),t(e).select2(n)}},f=function(){const e=t("#customize-controls .js-font-option-toggle");e.on("click",(function(){const n=t(this);!0===n.prop("checked")&&e.not(n).prop("checked",!1)})),t("#customize-controls .customize-panel-back, #customize-controls .customize-section-back").on("click",(function(){e.prop("checked",!1)}))},r=function(e,n){const s=n.find(".font-options__head .font-options__font-title");let i=e.family;void 0!==e.family_display&&(i=e.family_display),t(s).html(i)},v=function(e,n){const s=void 0!==e.variants?e.variants:[],i=n.find(".customify_font_weight"),a=i.val()?i.val():"",l=[];if(i.val(null).empty(),i.hasClass("select2-hidden-accessible")&&i.select2("destroy"),i.data("touched",!1),void 0===s||Object.keys(s).length<2)return i.parent().hide(),i.parent().prev("label").hide(),void i.data("disabled",!0);l.push({id:"",text:o}),t.each(s,(function(t,e){let n={id:e,text:e};a==e&&(n.selected=!0),l.push(n)})),i.select2({data:l}),i.parent().show(),i.parent().prev("label").show(),i.data("disabled",!1)},p=function(e,n,s){const i=void 0!==e.subsets?e.subsets:[],o=n.find(".customify_font_subsets"),l=[];if(o.val(null).empty(),o.hasClass("select2-hidden-accessible")&&o.select2("destroy"),o.data("touched",!1),void 0===i||Object.keys(i).length<2)return o.parent().hide(),o.parent().prev("label").hide(),void o.data("disabled",!0);const c=s();let u=[];_.isUndefined(c.selected_subsets)||_.isEmpty(c.selected_subsets)||(u=c.selected_subsets,Array.isArray(u)||(u=Object.keys(u).map((function(t){return u[t]})))),t.each(i,(function(t,e){if("latin"===e)return;const n={id:e,text:e};-1!==u.indexOf(e)&&(n.selected=!0),l.push(n)})),o.select2({data:l,placeholder:a}),o.parent().show(),o.parent().prev("label").show(),o.data("disabled",!1)},h=function(e,n){if(!0===c[n])return;if(!0===u[n])return;c[n]=!0;const s=e.find(".font-options__options-list").find("[data-value_entry]"),i=l(n),o=i(),a=_.isEmpty(o)?{}:t.extend(!0,{},o);s.each((function(e,n){const s=t(n),i=s.data("value_entry");let o=s.val();if(!_.isUndefined(i)&&!s.data("disabled")&&(s.data("touched")||_.isUndefined(a[i]))){if("font_family"===i){const e=t(n.options[n.selectedIndex]).data("src");e?a.src=e:delete a.src}_.isUndefined(o)||_.isNull(o)||""===o?delete a[i]:(_.includes(["letter_spacing","line_height","font_size"],i)&&(o=y(o,n,!1)),a[i]=o)}})),delete a.variants,delete a.subsets;const d=b(a.font_family);void 0!==a.font_variant&&void 0!==d.variants&&Object.keys(d.variants).length>0?(a.font_variant=String(a.font_variant),_.includes(d.variants,a.font_variant)||delete a.font_variant):delete a.font_variant,void 0!==a.selected_subsets&&void 0!==d.subsets&&Object.keys(d.subsets).length>0?a.selected_subsets=_.intersection(a.selected_subsets,d.subsets):delete a.selected_subsets,i.set(a),c[n]=!1},m=function(n,s,i){if(!0===u[i])return;u[i]=!0,t(n).find(".font-options__options-list").find("[data-value_entry]").each((function(n,i){const o=t(i),a=o.data("value_entry");if(void 0!==a&&""!==a&&void 0!==s[a]){if(_.includes(["letter_spacing","line_height","font_size"],a)){const t=y(s[a],i);""!==t.unit&&(o.data("value_unit",t.unit),_.isEmpty(o.attr("unit"))&&o.attr("unit",t.unit));const n=16,l=o.attr("unit").trim().toLowerCase(),c=o.data("value_unit").trim().toLowerCase();l!=c&&(_.includes(["em","rem"],c)&&"px"===l?t.value=k(t.value*n,e.fonts.floatPrecision):_.includes(["em","rem"],l)&&"px"===c&&(t.value=k(t.value/n,e.fonts.floatPrecision))),o.attr("min")&&o.attr("min")>t.value&&o.attr("min",t.value),o.attr("max")&&o.attr("max")<t.value&&o.attr("max",t.value),o.val(t.value)}else o.val(s[a]);o.data("touched",!1),o.trigger("change",["customify"])}})),u[i]=!1},y=function(e,n=!1,s=!0){const i={value:!1,unit:!1};if(_.includes(["","false",!1],e))return i;if(isNaN(e)){if(void 0!==e.value)i.value=e.value,void 0!==e.unit&&(i.unit=e.unit);else if(void 0!==e[0])i.value=e[0],void 0!==e[1]&&(i.unit=e[1]);else if("string"==typeof e){const t=e.match(/^([\d.\-+]+)(.+)/i);null!==t&&void 0!==t[1]?(i.value=t[1],_.isEmpty(t[2])||(i.unit=t[2])):i.value=e}}else i.value=e;if(!1!==n&&(!1===i.unit||_.isEmpty(i.unit))){let e="";const o=t(n);s?_.isEmpty(o.data("value_unit"))?_.isEmpty(o.attr("unit"))||(e=o.attr("unit")):e=o.data("value_unit"):_.isEmpty(o.attr("unit"))?_.isEmpty(o.data("value_unit"))||(e=o.data("value_unit")):e=o.attr("unit"),i.unit=e}return isNaN(i.value)||(i.value=parseFloat(i.value)),i},g=function(t){let n="system_font";return void 0!==e.fonts.cloud_fonts[t]?n="cloud_font":void 0!==e.fonts.theme_fonts[t]?n="theme_font":void 0!==e.fonts.google_fonts[t]&&(n="google_font"),n},b=function(t,n=!1){switch(!1===n&&(n=g(t)),n){case"theme_font":return e.fonts.theme_fonts[t];case"cloud_font":return e.fonts.cloud_fonts[t];case"google_font":return e.fonts.google_fonts[t];case"system_font":if(void 0!==e.fonts.system_fonts[t])return e.fonts.system_fonts[t]}return!1},k=function(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n};return{init:function(){i=e.l10n.fonts.familyPlaceholderText,o=e.l10n.fonts.variantAutoText,a=e.l10n.fonts.subsetPlaceholderText;const n=t(".customify_font_family");void 0!==l.settings.google_fonts_opts&&n.each((function(e,n){const s=t(n).find(".google-fonts-opts-placeholder").first();if(s){s.replaceWith(l.settings.google_fonts_opts);const e=t(n).data("active_font_family");void 0!==e&&t(n).val(e)}})),n.select2({placeholder:i}),n.on("change",(function(e,n){const i=e.target.value,o=t(e.target).closest(s),a=t(o.children(".customify_font_values")).data("customize-setting-link"),c=l(a),u=b(i);r(u,o),v(u,o),p(u,o,c),void 0!==n&&"customify"===n||(t(e.target).data("touched",!0),h(o,a))})),n.each((function(e,n){const i=t(n).closest(s),o=t(i.children(".customify_font_values")).data("customize-setting-link");l(o).bind((function(t,e){c[this.id]||m(i,t,this.id)}))})),d(t(".customify_font_weight"),!0),d(t(".customify_font_subsets"),!0,a),d(n.parents(s).find("select").not("select[class*=' select2'],select[class^='select2']"),!1),d(n.parents(s).find("input[type=range]"),!1),f()},selfUpdateValue:h,standardizeNumericalValue:y,determineFontType:g,getFontDetails:b,convertFontVariantToFVD:function(t){let e,n="n";switch(-1!==(t=String(t)).indexOf("italic")?(n="i",t=t.replace("italic","")):-1!==t.indexOf("oblique")&&(n="o",t=t.replace("oblique","")),t){case"100":e="1";break;case"200":e="2";break;case"300":e="3";break;case"500":e="5";break;case"600":e="6";break;case"700":case"bold":e="7";break;case"800":e="8";break;case"900":e="9";break;default:e="4"}return n+e},round:k}}())}(jQuery,customify,wp);